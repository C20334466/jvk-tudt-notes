<!DOCTYPE html>
<html lang="en">
    <head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta charset="UTF-8" />
	<link rel="shortcut icon" type="image/x-icon" href="res/images/logo.png" />
	<link rel="stylesheet" type="text/css" href="res/styles/ooswd.css" />
	<title>OOSWD</title>
    </head>
    <body>
	<header id="tudheader">
	    <img id="leftlogo" src="../common/res/images/tudublin_logo.png" alt="TU Dublin Logo">
	    <div id="tuddepttext">
		<p>School of Computer Science</p>
	    </div>
	    <div id="titlecontainer">
		<p id="title">Classes</p>
	    </div>
	    <img id="rightlogo" src="res/images/logo.png" alt="Logo" />
	</header>

	<div id="content">
	    <nav>
		<ul class="links">
		    <li><a href="index.html">Home</a></li>
		</ul>
		<ul class="commands">
		    <li class="openall">Open all</li>
		    <li class="closeall">Close all</li>
		</ul>

	    </nav>

	    <article>
		<ol class="toc_grp newline">
		    
	            <!--------------------------------------------------------------------->    
                    <li id="ARTCLID000091">
			<p>What is a class?</p>
			<article style="display:none">
                            <h2>What is a class?</h2>
			    <p>In a programming language, a class:
				<ul>
				    <li>is a specific <strong>blueprint</strong> for objects</li>
				    <li>represents the <strong>type</strong> of an object that is based on it as a blueprint</li>
				    <li>bundles <strong>data and associated behaviour</strong> together</li>
				    <li>is an object itself, of type <span class="fw">type</span>, and can be thought of as a 'meta-object' (an object that is the blueprint for other objects)</li>
				</ul>
			    </p>
			    <p><u>In Python</u></p>
				<ul>
				    <li>Everything is an object and therefore has a type underlying it.</li>
				    <li>What defines the type of an object is its class.</li>
				    <li>Even classes have a class, <span class="fw">type</span>.
					<details class="ice"><summary></summary>
					    <p>Try the following expressions in the Python command line, or wrapped in a <span class="fw">print()</span> call in PyCharm. </p>
					    <pre>
type(4)
type(int)

type("abcd")
type(str)

type([2, 3, 4])
type(list)</pre>
					</details>
				    </li>
				</ul>
				<h3>Why classes?</h3>
			    <ul>
				<li>With functions, we have seen one way of organising code to make it reusable, clearer and easier to maintain.</li>
				<li>Classes do the same, but they are essentially 'things' as opposed to functions, which represent 'behaviour'.</li>
				<li>Classes specific behaviour relevant to the thing that they are to be attached to them.</li>
				<li>Classes were designed to reflect reality, wherein we have things and associated behaviours. Consider the example in the picture below (it is a UML class diagram). Each box in the diagram shows a class. The top section contains the class name, the next section the class data and the bottom section the class methods (functions attached to a class).
				    <figure>
					<figcaption>Example class diagram in UML</figcaption>
					<img class="w-six" src="res/images/class_dgrm_example.png">
				    </figure>
				</li>
				<li>In any project but particularly in complex scenarios like the one shown in the picture <em>Example class diagram in UML</em> classes 
				    <ul>
					<li>break the problem down into domain concepts makes it easier to think about requirements</li>
					<li>make design and implementation more intuitive</li>
					<li>allow for easy division of labour in team projects</li>
					<li>allow for easy reuse of concept implementations thanks to
					    <ul>
						<li>the encapsulation of data</li>
						<li>well defined interfaces for manipulating those data</li>
					    </ul>
					</li>
				    </ul>
				</li>
			    </ul>
			    
			</article>
                    </li>
		    
	            <!--------------------------------------------------------------------->            
                    <li id="ARTCLID000092">
			<p>Defining a class in Python</p>
			<article style="display:none">
                            <h2>Defining a class in Python</h2>

			    <p>We use the class construct to define a new object type.</p>
			    <p>In Python a class is defined using the following syntax:</p>

			    <figure id="py-class-simple">
				<figcaption>A simple class defined in Python</figcaption><pre class="code-listing">
class Simple:
    x = "a"
    y = "b"

    def print(self):
        print("x is: ", self.x)
        print("y is: ", self.y)
				</pre>
				<table class="legend">    
				    <tr><td><span class="fw">class</span></td><td>the keyword</td></tr>
				    <tr><td><strong>Simple</strong></td><td>user-defined name for the class (CamelCase by convention)</td></tr>
				    <tr><td>the colon (<span class="fw">:</span>)</td><td>mandatory part of the syntax</td></tr>
				    <tr><td>everything below first line</td><td>body of the class</td></tr>
				    <tr><td><span class="fw">x</span> and <span class="fw">y</span></td><td>class member variables</td></tr>
				    <tr><td><span class="fw">print()</span></td><td>a member function (method)</td></tr>
				    <tr><td><span class="fw">self</span></td><td>the keyword used within methods to refer to the object (not yet created at definition time) on which the method was called at runtime</td></tr>
				</table>
				<hr><hr>
			    </figure>

			</article>
		    </li>
		    
		    <!--------------------------------------------------------------------->            
		    <li id="ARTCLID000093">
			<p>Using a class to create objects</p>
			<article style="display:none">
			    <h2>Using a class to create objects</h2>
			    <p>To create a class, we use the class name as a function (this will be explained later):</p>
			    <figure id="py-obj-from-cls" class="my1">
				<figcaption>Creating an object from a class</figcaption><pre class="code-listing">
s = Simple()
s.print()</pre>
				<table class="legend">    
				    <tr><td><span class="fw">s = Simple()</span></td><td>creates an object of class <span class="fw">Simple</span> and assigns it to variable <span class="fw">s</span></td></tr>
				    <tr><td><span class="fw">s.print()</span></td><td>uses dot-notation to run the method <span class="fw">print</span> of class <span class="fw">Simple</span> on object <span class="fw">s</span></td></tr>
				</table>
				<hr><hr>
			    </figure>			    
			</article>			
		    </li>
		    
		    

		    <!--------------------------------------------------------------------->            
		    <li id="ARTCLID000094">
			<p>The constructor</p>
			<article style="display:none">
			    <h2>The constructor</h2>
			    <ul>
				<li>When an object is created, it is initialised with a call to a method called the <strong>constructor</strong>.</li>
				<li>If the constructor is not defined explicitly, the default constructor is called and this essentially does nothing.</li>
				<li>To add variables that will belong to the objects (instance member variables), we must define them in the constructor.</li>
			    </ul>
			    <figure id="py-constructor">
				<figcaption>The constructor method</figcaption><pre class="code-listing">
class Simple:
    x = "a"
    y = "b"

    def __init__(self):
        self.num1 = 1
        self.num2 = 3

    def print(self):
        print("x is: ", self.x)
        print("y is: ", self.y)
        print("num1 is: ", self.num1)
        print("num2 is: ", self.num2)
				</pre>
				<table class="legend">
				    <tr><td><span class="fw">__init__</span></td><td>the constructor method</td></tr>
				    <tr><td><span class="fw">num1</span> and <span class="fw">num2</span></td><td>instance member variables (pertaining to object)</td></tr>
				</table>
				<hr/><hr/>
			    </figure>

			    <details class="ice"><summary></summary>
				<p>Create a Python file in PyCharm called <em>simple.py</em> and copy in the code from figure <a class="xref" href="#py-constructor">?</a>. Then add a line to create an object of type <span class="fw">Simple</span> and a line to call the <span class="fw">print</span> method. Run the code.
				</p>
				<p><a href="res/files/python/classes/simple1.py">EXAMPLE SOLUTION</a></p>
			    </details>

			</article>
		    </li>

		    
	            <!--------------------------------------------------------------------->            
                    <li id="ARTCLID000099">
			<p>Accessing and modifying member variables</p>
			<article style="display:none">
                            <h2>Accessing and modifying member variables</h2>
			    <p>Like member functions (methods), member variables are accessed using the dot notation.</p>

			    <figure id="py-member-vars">
				<figcaption>Reading and writing member variables</figcaption><pre class="code-listing">
s = Simple()

print("\n---- print variables individually from object ----")
print(s.x, s.y, s.num1, s.num2)

print("---- object before modification ----")
s.print()

s.x = "new a"
s.y = "new b"
s.num1 = 10
s.num2 = 30

print("---- object after modification ----")
s.print()				</pre>
			    </figure>
			    
			    <details class="ice"><summary></summary>
				<p>Clear your <em>simple.py</em> file of all code bar the class definition from <a class="xref" href="#py-constructor">?</a>. Add the statements from code snippet <a class="xref" href="#py-member-vars">?</a> and run it. Make sure you understand where the output is coming from.</p>
				<p><a href="res/files/python/classes/simple2.py">EXAMPLE SOLUTION</a></p>
			    </details>

			    <!-- subtitle  -->

			    <h3 class="mt3">Adding instance member variables</h3>
			    <p>While this is <strong>not recommended for the moment</strong>, instance variables can be added to already created objects.</p>

			    <details class="ice"><summary></summary>
				<p>Copy the following code into a Python script file. You will notice that the <span class="fw">Simple</span> class print method has been modified for easier addition of a printout heading and that it prints a (nonexistent) member variable <span class="fw">z</span>. Run the script.</p><hr><pre>
class Simple:
    x = "a"
    y = "b"

    def __init__(self):
        self.num1 = 1
        self.num2 = 3

    def print(self, heading):
        print("----- {} -----".format(heading))
        print("x is: ", self.x)
        print("y is: ", self.y)
        print("num1 is: ", self.num1)
        print("num2 is: ", self.num2)
        print("z is: ", self.z)
        
s1 = Simple()
s2 = Simple()

print("")

s1.z = "c"
s1.print("s1 after adding variable z to s1")
s2.print("s2 after adding variable z to s1")</pre><hr>
				<p>An error is reported. Why do you think this happened? Correct the code so that it runs without errors.
				</p>
				
				<p><a href="res/files/python/classes/simple3.py">EXAMPLE SOLUTION</a></p>
			    </details>
			    
			    <!-- subtitle  -->			    

			    <h3 class="mt3">Class vs. instance member variables </h3>

			    <p>There is a difference between the variables defined directly in the class and variables defined in the constructor:</p>
			    <ul>
				<li>class variables, which are defined directly in the class, are shared by all objects</li>
				<li>each object has its own copy of a variable defined in the constructor</li>
			    </ul>

			    <figure id="py-clas-inst-vars">
				<figcaption>Class and instance variables</figcaption><pre class="code-listing">
class Simple:
    x = "a"
    y = "b"

    def __init__(self):
        self.num1 = 1
        self.num2 = 3
				</pre>
				<table class="legend">
				    <tr><td><span class="fw">x</span> and <span class="fw">y</span></td><td>class variables (also called static variables), shared by all objects of the class, initialised at class definition time</td></tr>
				    <tr><td><span class="fw">num1</span> and <span class="fw">num2</span></td><td>instance variables, with a separate copy for each object, initialised in the constructor, at object creation time</td></tr>
				</table>
				<hr/><hr/>

			    </figure>

			    <p>Let's have a look how access to these variables works.</p>
			    
			    <figure id="py-class-vs-inst-1">
				<figcaption>Class vs. instance variables (part 1)</figcaption><pre class="code-listing">
class Simplissima:
    x = "a"

s1 = Simplissima()
s2 = Simplissima()

print(s1.x)
print(s2.x)	</pre>
			    </figure>
			    What happens?<pre>
                     class: x = "a"
      
          object s1: NA        object s2: NA
      
               ||                    ||
      	       ||                    ||
               \/		     \/
      
           print(s1.x)           print(s2.x)
      
       own x not available   own x not available
          so get class x        so get class x
      
           output: a              output: a
      			    </pre>

			    <p>Adding onto the code in <a class="xref" href="#py-class-vs-inst-1">?</a>:</p>
			    <figure id="py-class-vs-inst-2">
				<figcaption>Class vs. instance variables (part 2)</figcaption><pre class="code-listing">
s1.x = "hello"
s2.x = "world"
print(s1.x)
print(s2.x)</pre>
			    </figure>
			    What happens now?<pre>
                     class: x = "a"
      
      object s1: x = "hello"     object s2: NA
      
               ||                    ||
      	       ||                    ||
               \/		     \/
      
           print(s1.x)           print(s2.x)
      
         own x available       own x available
          so print that         so print that
      
          output: hello         output: hello
			    </pre>
			    
			    <p>But can we still access the class (static) variable? Yes. We must scope the variable with the class name. Adding the following line onto the code in the previous two snippets will print 'a'.</p>
			    <figure id="py-class-vs-inst-3">
				<figcaption>Class vs. instance variables (part 3)</figcaption><pre class="code-listing">
print(Simplissima.x) # output: a</pre>
			    </figure>

			    <div class="box">
				<p><strong>Class vs. instance variable summary</strong></p>
				<p>Class variables are useful for declaring constants that will not be modified e.g.<span class="fw">pi=3.14</span>.</p>
				<p>Although sometimes they are used to set initial values for instance variables that will be modified later, this is not recommended as it obsucres the intention of the programmer. It is much better to initialise instance variables in the constructor e.g. <span class="fw">self.x = "hohoho"</span>.</p>
			    </div>
			    
			</article>
                    </li>

		    
	            <!--------------------------------------------------------------------->
                    <li id="ARTCLID000098">
			<p>Constructor parameters</p>
			<article style="display:none">
                            <h2>Constructor parameters</h2>

			    <p>Our example constructor from the previous section always initialises <span class="fw">num1</span> and <span class="fw">num2</span> to the same values. However, objects can be initialised with different values with the use of constructor parameters.</p>
			    <figure id="py-constructor-params">
				<figcaption>Constructor parameters</figcaption><pre class="code-listing">class Simple:
    def __init__(self, n1, n2):
        self.num1 = n1
        self.num2 = n2

    def print(self, heading=""):
        print("")
        if heading != "":
            print("----- {} -----".format(heading))
        print("num1 is: ", self.num1)
        print("num2 is: ", self.num2)


s = Simple(3, 4)
s.print()				</pre>
			    </figure>
			    <p>Constructor parameters listed after the <span class="fw">self</span> keyword are treated like any other function parameters.</p>
			    <details class="ice"><summary></summary>
				<p>Copy the code snippet <a class="xref" href="#py-constructor-params">?</a> into an empty Python script and run it to check if the outputs are as expected.</p>
				<p>Then modify the script to include another parameter in the constructor and create an instance variable from its value. Modify the <span class="fw">print</span> method to include the new instance variable in the printout.</p>
				<p><a href="res/files/python/classes/simple4.py">EXAMPLE SOLUTION</a></p>
			    </details>
			</article>
                    </li>

		    <!--------------------------------------------------------------------->            
		    <li id="ARTCLID000095">
			<p>Member naming convention</p>
			<article style="display:none">
			    <h2>Member naming convention</h2>

			    <p>Some programming languages have constructs that allow controlling access to variables and methods in classes. In Python all variables and methods in a class are accessible (public). However, there is a convention in naming them that indicates to class users what the intention of the class developer was with respect to variable and method levels of access.</p>
			    <figure id="py-access-convention">
				<figcaption>Naming convention for variables and methods</figcaption><pre class="code-listing">class MixedUp:
    def __init__(self)
        self.x = "a"     # public
        self._y = "b"    # protected
        self.__z = "c"   # private</pre>
				<table class="legend">    
				    <tr><td><span class="fw">x (name with no underscores)</span></td><td>a public variable, intended for access by anybody</td></tr>
				    <tr><td>_y (one leading underscore)</td><td>a protected variable, intended for access only by objects of the same class </td></tr>
				    <tr><td>__z (two leading underscores)</td><td>a private variable, inteded for access only by the object itself</td></tr>
				    <tr><td colspan="2"><strong><em>Note that the same rules apply to method names.</em></strong></td></tr>
				</table>
			    </figure>

			    <p>While nothing stops developers from not complying with the convention, doing this could be considered 'hacking', as it means not using someone else's code in the way it was intended.</p>	
			</article>
		    </li>
		    

	            <!--------------------------------------------------------------------->            
                    <li id="ARTCLID000097">
			<p>Getters, setters and deleters OPTIONAL</p>
			<article style="display:none">
                            <h2>Getters, setters and deleters OPTIONAL</h2>
			    <p>The constructs described in this section are presented for information only. The student is not expected to use them in this module.</p>

			    <figure id="py-get-set-del">
				<figcaption>Getter, setter and deleter example</figcaption><pre class="code-listing">
class WithProp:
    
    def __init__(self):
        print("calling constructor")
        self._x = "a"

    def getx(self):
        print("calling getx")
        return self._x

    def setx(self, value):
        print("calling setx")
        self._x = value

    def delx(self):
        print("calling delx")
        del self._x

    x = property(getx, setx, delx)

def prhd(num):
    print("--------- {} -----------".format(num))
    
prhd(1)
wp = WithProp()

prhd(2)
print(wp.x)     # output: a

prhd(3)
wp.x = "b"

prhd(4)
print(wp.x)     # output: b

prhd(5)
del wp.x

prhd(6)
print(wp.x)     # error				</pre>
				<table class="legend">
				    <tr><td><span class="fw">x = property(getx, setx, delx)</span></td><td>defines x as an instance variable of class WithProp</td></tr>
				    <tr><td><span class="fw">getx</span>, <span class="fw">setx</span> and <span class="fw">delx</span></td><td>methods that wrap getting, setting and deleting, performing additional stuff (in this case printing "calling ...")</td></tr>
				    <tr><td colspan="2">Notice that the getter, setter and delter must access <span class="fw">x</span> with a prepended underscore, which from the outside it is accessed a just <span class="fw">x</span>.</td></tr>
				</table>
				<hr/><hr/>
			    </figure>
			    <p>You might like to copy the code snippet <a class="xref" href="#py-get-set-del">?</a> into a script and experiment with it.</p>
			</article>
                    </li>

		    
	            <!--------------------------------------------------------------------->            
                    <li id="ARTCLID000100">
			<p>Classes as types of member variables</p>
			<article style="display:none">
                            <h2>Classes as types of member variables</h2>

			    <p>Objects that are instances of classes defined as discussed in this lesson can be used like values of any other type. Thus they can be used as the values of object member variables.</p>
			    <p>In typed programming languages, the type of a member variable can be declared to be some class.</p>
			    <p>In Python we do not declare the type of a variable, but class methods can be written with the assumption that a particular variable will contain an object of a certain class.</p>
			    <figure id="py-class-as-member">
				<figcaption>A class as the type of a member variable value</figcaption><pre class="code-listing">
class Address:
    def __init__(self, n, s, t):
        self.number = n
        self.street = s
        self.town = t

class Person:
    def __init__(self, n, s, a):
        self.name = n
        self.surname = s
        self.address = a

    def print(self):
        print(self.name, self.surname)
        print(self.address.number, self.address.street, self.address.town)</pre>
			    </figure>
			    <p>In the example in code snippet <a class="xref" href="#py-class-as-member">?</a> the class <span class="fw">Person</span> includes a member variable called <span class="fw">address</span>. The <span class="fw">print</span> method assumes that <span class="fw">address</span> has the type <span class="fw">Address</span> and accesses the variables of that class.</p>
			    <details class="ice"><summary></summary>
				<p>Copy the code in <a class="xref" href="#py-class-as-member">?</a> into a Python script, then edit it to create an object of class <span class="fw">Address</span> and an object of class <span class="fw">Person</span> (passing in the just created address). Print the person object.</p>
				<p>Now create another person object but instead of an address of type <span class="fw">Address</span> pass in a string. What happens when you try to print the second person object? Why?</p>
				<p><a href="res/files/python/classes/clsincls.py">EXAMPLE SOLUTION</a></p>
			    </details>

			    <p>In the previous in-class exercise the <span class="fw">Person</span> class's <span class="fw">print</span> function accesses the <span class="fw">Address</span> class's mamber variables directly. This is not good practice. To get the most out of object-oriented programming a developer should strive towards encapsulation, exposing as little of a class's variables as possible. Do the next exercise to improve that code.</p>
				
			    <details class="ice"><summary></summary>
				<p>Working with the same file as in the previous exercise, delete the second person and modify the two classes so that the <span class="fw">Address</span> class gets a <span class="fw">print</span> method and the <span class="fw">Person</span> class calls it, rather than accessing individual variables in the address object. Mark all the member variables in both classes as private.</p>
				    <p><a href="res/files/python/classes/cicencapsulate.py">EXAMPLE SOLUTION</a></p>
			    </details>
			</article>
                    </li>


	            <!--------------------------------------------------------------------->            
                    <li id="ARTCLID000102">
			<p>Importing modules</p>
			<article style="display:none">
                            <h2>Importing modules</h2>
			    <p>If we started defining many classes and placed them all in the same file things would start getting pretty unmanageable very quickly.</p>
			    <p>We can place our code in different files and import a file (or module) in another one that depends on its contents.</p>
			    <figure id="py-import">
				<figcaption>Module import</figcaption>
				Contents of address.py: <pre class="code-listing">
class Address:
    # code defining the class</pre>
				Contents of person.py: <pre class="code-listing">
from address import Address

class Person:
    # code defining the class and using Address</pre>

			    </figure>

			    <details class="ice"><summary></summary>
				<p>Download <a href="res/files/python/classes/import/import_set.py">this file</a> onto your computer. Then reorganise it into three files called <em>address.py</em>, <em>person.py</em> and <em>main.py</em>. The first two should include a class definition only and the last on the code that creates <span class="fw">Person</span> objects and prints them. Remember that you must use imports.</p>
<p><a href="res/files/python/classes/import.zip">EXAMPLE SOLUTION</a></p>
			    </details>

			    <p>We can also import modules that are installed with Python but are not imported when Python starts up. Examples are the <strong>random</strong> module that we have already used and the <strong>datetime</strong> module, which we will use in the following exercise.</p>
			    <p>There are several variations of the import syntax, as seen in the next code snippet</p>
			    
			    <figure id="py-import">
				<figcaption>Import syntax</figcaption><pre class="code-listing">
# import the entire module
import random

# then access objects from the module by specifying the scope (module name), followed by a dot and the object name
random.randint(1, 10)

# import specific items (as used above with our classes)
from random import randint

# then access the imported object directly
randint(1, 10)

# import all objects from the module
from math import *

# all objects can be accessed by name 
print(pi) # pi is an object in module math

# give an alias to the imported module
import math as m

# access using the alias to specify the scope
print(m.pi)

</pre>

</figure>

				
			    <details class="ice"><summary></summary>
				<p>Starting with the solution files for the previous exercise on imports, modify the person class to add a date of birth as a member variable of type <span class="fw">datetime</span>.</p>
				<p>The class <span class="fw">datetime</span> is available in Python from module <span class="fw">datetime</span> (same name). Add a method to the <span class="fw">Person</span> class that calculates and returns the person's age. Write some code in file <em>main.py</em> to test your solution.</p>
				<p><a href="res/files/python/classes/age.zip">EXAMPLE SOLUTION</a></p>
			    </details>
			</article>
                    </li>
		    
	            <!--------------------------------------------------------------------->            
                    <li id="ARTCLID000101">
			<p>Collections of objects</p>
			<article style="display:none">
                            <h2>Collections of objects</h2>
			    <p>Objects of any type can be in collections such as lists.</p>
			    <details class="ice"><summary></summary>
				<p>Starting with the files given <a href="res/files/python/classes/team_set.zip">here</a>, modify the <span class="fw">Team</span> class in file <em>team.py</em> with methods to add a person to the team, remove a person from the team and print a list filtered by role in team (or whole list if role is ""). You will notice that the class <span class="fw">Person</span> now has a member variable indicating the member's role ('lead', 'dev' or 'ops'). Write some code in file <em>main.py</em> to test all three methods.</p>
				<p><a href="res/files/python/classes/team.zip">EXAMPLE SOLUTION</a></p>
			    </details>
			</article>
                    </li>
		    
		</ol>
	    </article>
	    <p id="sig">Jelena Vasić</p>
	</div>

	<script type="text/javascript" src="../common/res/scripts/main.js"></script>
	<script type="text/javascript" src="../common/res/scripts/modules/xrefs.js"></script>
	<script type="text/javascript" src="res/scripts/xrefs.js"></script>
    </body>
</html>
